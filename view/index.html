<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script type="text/javascript">
        var red,blue,green,yellow;
        var request = new XMLHttpRequest();
        request.open('GET','https://lightledapi.herokuapp.com/led',false);
        request.send(null);
        var myVar = request.responseText;
        $(document).ready(function () {
            $.ajax({
                type: "GET",
                dataType: "json",
                url: "https://lightledapi.herokuapp.com/led",
                cors:true,
                success: function (data) {
                    $(".onoffswitchbred-checkbox").attr('checked', data[0].red);
                    $(".onoffswitchyellow-checkbox").attr('checked', data[0].yellow);
                    $(".onoffswitchblue-checkbox").attr('checked', data[0].blue);
                    $(".onoffswitchgreen-checkbox").attr('checked', data[0].green);
                    red = data[0].red;
                    blue = data[0].blue;
                    green = data[0].green;
                    yellow = data[0].yellow;
                }
            });
        });
        var myData = {}
        myData.blue = JSON.parse(request.responseText)[0].blue;
        myData.red = JSON.parse(request.responseText)[0].red;
        myData.yellow = JSON.parse(request.responseText)[0].yellow;
        myData.green = JSON.parse(request.responseText)[0].green;
        console.log(myData)
        $(document).ready(function () {
            $('.onoffswitchblue-checkbox').click(function () {
                myData.blue = !myData.blue
                $.ajax
                    ({
                        //type:Göndereceimiz metodu belirler
                        type: "POST",
                        //url :veri istenilen php dosyasının adresi
                        data: JSON.stringify(myData),
                        contentType: 'application/json',
                        url: 'https://lightledapi.herokuapp.com/led/update',
                        success: function(data) {
                            console.log('Success')
                            console.log(JSON.stringify(data))
                        }
                        //data :verileri göndermek için,
                        //contentType: 'json',
                        //dataType : "json",
                        //cors: true,
                    })
            });
        });
        $(document).ready(function () {
            $('.onoffswitchbred-checkbox').click(function () {
                myData.red = !myData.red
                $.ajax
                    ({
                        //type:Göndereceimiz metodu belirler
                        type: "POST",
                        //url :veri istenilen php dosyasının adresi
                        data: JSON.stringify(myData),
                        contentType: 'application/json',
                        url: 'https://lightledapi.herokuapp.com/led/update',
                        success: function(data) {
                            console.log('Success')
                            console.log(JSON.stringify(data))
                        }
                    })
            });
        });
        $(document).ready(function () {
            $('.onoffswitchgreen-checkbox').click(function () {
                myData.green = !myData.green
                $.ajax
                    ({
                        //type:Göndereceimiz metodu belirler
                        type: "POST",
                        //url :veri istenilen php dosyasının adresi
                        data: JSON.stringify(myData),
                        contentType: 'application/json',
                        url: 'https://lightledapi.herokuapp.com/led/update',
                        success: function(data) {
                            console.log('Success')
                            console.log(JSON.stringify(data))
                        }
                    })
            });
        });
        $(document).ready(function () {
            $('.onoffswitchyellow-checkbox').click(function () {
                // if(yellow){
                //     myData.yellow = false;
                // }
                // else{
                //     myData.yellow = true;
                // }
                myData.yellow = !myData.yellow
                $.ajax
                    ({
                        //type:Göndereceimiz metodu belirler
                        type: "POST",
                        //url :veri istenilen php dosyasının adresi
                        data: JSON.stringify(myData),
                        contentType: 'application/json',
                        url: 'https://lightledapi.herokuapp.com/led/update',
                        success: function(data) {
                            console.log('Success')
                            console.log(JSON.stringify(data))
                        }
                    })
            });
        });
    </script>

    <style>
        .onoffswitchblue {
            position: relative;
            width: 90px;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }

        .onoffswitchblue-checkbox {

            display: none;
        }

        .onoffswitchblue-label {
            display: block;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid #999999;
            border-radius: 20px;
        }

        .onoffswitchblue-inner {
            display: block;
            width: 200%;
            margin-left: -100%;
            transition: margin 0.3s ease-in 0s;
        }

        .onoffswitchblue-inner:before,
        .onoffswitchblue-inner:after {
            display: block;
            float: left;
            width: 50%;
            height: 30px;
            padding: 0;
            line-height: 30px;
            font-size: 14px;
            color: white;
            font-family: Trebuchet, Arial, sans-serif;
            font-weight: bold;
            box-sizing: border-box;
        }

        .onoffswitchblue-inner:before {
            content: "ON";
            padding-left: 10px;
            background-color: #34A7C1;
            color: #FFFFFF;
        }

        .onoffswitchblue-inner:after {
            content: "OFF";
            padding-right: 10px;
            background-color: #EEEEEE;
            color: #34A7C1;
            text-align: right;
        }

        .onoffswitchblue-switch {
            display: block;
            width: 18px;
            margin: 6px;
            background: #FFFFFF;
            position: absolute;
            top: 0;
            bottom: 0;
            right: 56px;
            border: 2px solid #999999;
            border-radius: 20px;
            transition: all 0.3s ease-in 0s;
        }

        .onoffswitchblue-checkbox:checked+.onoffswitchblue-label .onoffswitchblue-inner {
            margin-left: 0;
        }

        .onoffswitchblue-checkbox:checked+.onoffswitchblue-label .onoffswitchblue-switch {
            right: 0px;
        }

        .onoffswitchbred {
            position: relative;
            width: 90px;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }

        .onoffswitchbred-checkbox {
            display: none;
        }

        .onoffswitchbred-label {
            display: block;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid #999999;
            border-radius: 20px;
        }

        .onoffswitchbred-inner {
            display: block;
            width: 200%;
            margin-left: -100%;
            transition: margin 0.3s ease-in 0s;
        }

        .onoffswitchbred-inner:before,
        .onoffswitchbred-inner:after {
            display: block;
            float: left;
            width: 50%;
            height: 30px;
            padding: 0;
            line-height: 30px;
            font-size: 14px;
            color: white;
            font-family: Trebuchet, Arial, sans-serif;
            font-weight: bold;
            box-sizing: border-box;
        }

        .onoffswitchbred-inner:before {
            content: "ON";
            padding-left: 10px;
            background-color: #FA2020;
            color: #FFFFFF;
        }

        .onoffswitchbred-inner:after {
            content: "OFF";
            padding-right: 10px;
            background-color: #EEEEEE;
            color: #FA2020;
            text-align: right;
        }

        .onoffswitchbred-switch {
            display: block;
            width: 18px;
            margin: 6px;
            background: #FFFFFF;
            position: absolute;
            top: 0;
            bottom: 0;
            right: 56px;
            border: 2px solid #999999;
            border-radius: 20px;
            transition: all 0.3s ease-in 0s;
        }

        .onoffswitchbred-checkbox:checked+.onoffswitchbred-label .onoffswitchbred-inner {
            margin-left: 0;
        }

        .onoffswitchbred-checkbox:checked+.onoffswitchbred-label .onoffswitchbred-switch {
            right: 0px;
        }

        .onoffswitchgreen {
            position: relative;
            width: 90px;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }

        .onoffswitchgreen-checkbox {
            display: none;
        }

        .onoffswitchgreen-label {
            display: block;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid #999999;
            border-radius: 20px;
        }

        .onoffswitchgreen-inner {
            display: block;
            width: 200%;
            margin-left: -100%;
            transition: margin 0.3s ease-in 0s;
        }

        .onoffswitchgreen-inner:before,
        .onoffswitchgreen-inner:after {
            display: block;
            float: left;
            width: 50%;
            height: 30px;
            padding: 0;
            line-height: 30px;
            font-size: 14px;
            color: white;
            font-family: Trebuchet, Arial, sans-serif;
            font-weight: bold;
            box-sizing: border-box;
        }

        .onoffswitchgreen-inner:before {
            content: "ON";
            padding-left: 10px;
            background-color: #19E64C;
            color: #FFFFFF;
        }

        .onoffswitchgreen-inner:after {
            content: "OFF";
            padding-right: 10px;
            background-color: #EEEEEE;
            color: #19E64C;
            text-align: right;
        }

        .onoffswitchgreen-switch {
            display: block;
            width: 18px;
            margin: 6px;
            background: #FFFFFF;
            position: absolute;
            top: 0;
            bottom: 0;
            right: 56px;
            border: 2px solid #999999;
            border-radius: 20px;
            transition: all 0.3s ease-in 0s;
        }

        .onoffswitchgreen-checkbox:checked+.onoffswitchgreen-label .onoffswitchgreen-inner {
            margin-left: 0;
        }

        .onoffswitchgreen-checkbox:checked+.onoffswitchgreen-label .onoffswitchgreen-switch {
            right: 0px;
        }

        .onoffswitchyellow {
            position: relative;
            width: 90px;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }

        .onoffswitchyellow-checkbox {
            display: none;
        }

        .onoffswitchyellow-label {
            display: block;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid #999999;
            border-radius: 20px;
        }

        .onoffswitchyellow-inner {
            display: block;
            width: 200%;
            margin-left: -100%;
            transition: margin 0.3s ease-in 0s;
        }

        .onoffswitchyellow-inner:before,
        .onoffswitchyellow-inner:after {
            display: block;
            float: left;
            width: 50%;
            height: 30px;
            padding: 0;
            line-height: 30px;
            font-size: 14px;
            color: white;
            font-family: Trebuchet, Arial, sans-serif;
            font-weight: bold;
            box-sizing: border-box;
        }

        .onoffswitchyellow-inner:before {
            content: "ON";
            padding-left: 10px;
            background-color: #EBEB2F;
            color: #FFFFFF;
        }

        .onoffswitchyellow-inner:after {
            content: "OFF";
            padding-right: 10px;
            background-color: #EEEEEE;
            color: #EBEB2F;
            text-align: right;
        }

        .onoffswitchyellow-switch {
            display: block;
            width: 18px;
            margin: 6px;
            background: #FFFFFF;
            position: absolute;
            top: 0;
            bottom: 0;
            right: 56px;
            border: 2px solid #999999;
            border-radius: 20px;
            transition: all 0.3s ease-in 0s;
        }

        .onoffswitchyellow-checkbox:checked+.onoffswitchyellow-label .onoffswitchyellow-inner {
            margin-left: 0;
        }

        .onoffswitchyellow-checkbox:checked+.onoffswitchyellow-label .onoffswitchyellow-switch {
            right: 0px;
        }
    </style>
</head>

<body>

    <div class="onoffswitchbred">
        <input type="checkbox" name="onoffswitchbred" class="onoffswitchbred-checkbox" id="myonoffswitchbred" checked>
        <label class="onoffswitchbred-label" for="myonoffswitchbred">
            <span class="onoffswitchbred-inner"></span>
            <span class="onoffswitchbred-switch"></span>
        </label>
    </div>
    <div class="onoffswitchgreen">
            <input type="checkbox" name="onoffswitchgreen" class="onoffswitchgreen-checkbox" id="myonoffswitchgreen"
                checked>
            <label class="onoffswitchgreen-label" for="myonoffswitchgreen">
                <span class="onoffswitchgreen-inner"></span>
                <span class="onoffswitchgreen-switch"></span>
            </label>
        </div>

    <div class="onoffswitchyellow">
            <input type="checkbox" name="onoffswitchyellow" class="onoffswitchyellow-checkbox" id="myonoffswitchyellow"
                checked>
            <label class="onoffswitchyellow-label" for="myonoffswitchyellow">
                <span class="onoffswitchyellow-inner"></span>
                <span class="onoffswitchyellow-switch"></span>
            </label>
        </div>
    

    <div class="onoffswitchblue">
            <input type="checkbox" name="onoffswitchblue" class="onoffswitchblue-checkbox" id="myonoffswitchblue" checked>
            <label class="onoffswitchblue-label" for="myonoffswitchblue">
                <span class="onoffswitchblue-inner"></span>
                <span class="onoffswitchblue-switch"></span>
            </label>
        </div>

</body>

</html>